<!DOCTYPE html>

<html>
    <head>
        <title>Take attendance</title>
        <style>
            body {
                display: grid;
                grid-template-rows: 1fr 7fr;
                background-image: url(static/img/sakura.webp);
                background-repeat: repeat;
            }
        </style>
        <link rel="stylesheet" href="static/css/header.css">
        <link rel="stylesheet" href="static/css/main.css">
        <link rel="stylesheet" href="static/css/take-attendance.css">
    </head>

    <body>
        <div class="header">

            <div class="logo-container">
                <img class="logo" src="static/img/Header.png" alt="AULTP Logo">
            </div>
            
            <span class="heading">
                Learner-Teacher-Platform Portal
            </span>

            <div class="links">
                <form action="login.html">
                    <input type="submit" value="Logout" class="header-button">
                </form>

                <form target="_blank" action="https://andhrauniversity.edu.in">
                    <input type="submit" value="A.U. Website" class="header-button">
                </form>
                
                <form target="_blank" action="https://results.andhrauniversity.edu.in/">
                    <input type="submit" value="EMS Website" class="header-button">
                </form>

                <button class="header-button" onClick="darkMode()">
                    Dark Mode
                </button>

            </div>
        </div>

        <div class="main">

            <div class="navbar">
                <a href="welcome-teacher.html"><button class="nav-link">
                    Dashboard
                </button></a>
                <button class="nav-link">Class Wall</button>
            </div>

            <div class="take-attendance">

                <h1>Take attendance</h1>

                <!-- Include action later -->
                <form action="" method="POST">

                    <div class="attendance-inputs">
                        <label for="class">Class: </label>
                        <select name="class" id="class">
                            <option value="">Select Class</option>
                            <option value="*">All</option>
                            <option value="III-CSE4">III-CSE4</option>
                            <option value="III-CSE5">III-CSE5</option>
                            <option value="III-CSE6">III-CSE6</option>
                        </select>
                    </div>

                    <br/>

                    <div class="attendance-inputs">
                        <label for="period">Period: </label>
                        <select name="period" id="period">
                            <option value="">Select Period</option>
                            <option value="CS08">DWDM</option>
                            <option value="CS09">SS</option>
                            <option value="CS10">DCCN Lab</option>
                            <option value="CS11">PP Lab</option>
                        </select>
                    </div>

                    <br/>

                    <div class="attendance-inputs">
                        <label for="fetch-location">Fetch location: </label>
                        <button id="fetch-location" onClick="fetchLocation(event);">Fetch</button>
                    </div>

                    <br/>

                    <span id="fetch-msg" style="color: green; display: none;">
                        Fetched location successfully
                    </span>
                    
                    <br/><br/>

                    <script>
                        function fetchLocation(event) {
                            event.preventDefault();
                            document.getElementById('fetch-msg').style.display = 'block';
                    
                            document.getElementById('allow-attendance').disabled = false;
                        }
                    </script>

                    <div class="attendance-inputs">
                        <label for="allow-attendance">Generate passkey and allow attendance: </label>
                        <button id="allow-attendance" onClick="generatePasskey(event);" disabled>Generate</button>
                    </div>
                    <br />

                    <span id="generate-msg" style="color: green; display: none;">Passkey generated successfully</span>

                    <br/><br/>

                    <script>
                        function generatePasskey(event) {
                            event.preventDefault();
                            document.getElementById('generate-msg').style.display = 'block';

                            document.getElementById('end-attendance').disabled = false;
                        }
                    </script>

                    <div class="attendance-inputs">
                        <label for="end-attendance">Disallow attendance</label>
                        <button id="end-attendance" onClick="endAttendance(event);" disabled>End</button>
                    </div>

                    <br/>

                    <script>
                        function endAttendance(event) {
                            event.preventDefault();
                            alert('Attendance disallowed');

                            document.getElementById('generate-msg').style.display = 'none';

                            document.getElementById('fetch-msg').style.display = 'none';

                            document.getElementById('fetch-location').disabled = true;
                            document.getElementById('allow-attendance').disabled = true;
                            document.getElementById('end-attendance').disabled = true;

                            document.getElementById('after-end').style.display = 'block';
                        }
                    </script>
                    <div id="after-end" style="display: none;">

                        <div class="attendance-inputs">
                            <label for="allow-numbers">Allow numbers: </label>

                            <textarea type="textbox" class="textbox" name="allow-numbers" id="allow-numbers" placeholder="Enter roll numbers you want to allow">
                            </textarea>
                        </div>
                        <br/> <br/>

                        <div class="attendance-inputs">
                            <label for="disallow-numbers">Disallow numbers: </label>

                            <textarea type="textbox" class="textbox" id="disallow-numbers" name="disallow-numbers" placeholder="Enter roll numbers you want to disallow">
                            </textarea>
                        </div>
                        <br/><br/>

                        <div style="margin-top: 30px;">
                            <input type="submit" value="Post attendance" class="main-button">
                        </div>
                    </div>
                </form>
            </div>

    </body>
</html>